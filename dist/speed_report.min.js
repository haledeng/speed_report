define(function(t,n,r){var e=function(t){if(t.SPEED_REPORT)return t.SPEED_REPORT;var n=t.SPEED_REPORT={},r={url:"http://test.com",includeTiming:!0},e=Object.prototype.toString,o=function(t){var n=/^\[object\s(.*)\]$/;return e.call(t).replace(n,function(t,n){return n})},a=function(t){return"Object"===o(t)},i=function(t,n){if(!a(n))return t;for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t},u=function(t,n){if(!a(t))return"";var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e+"="+t[e]);return r.join(n)},c=function(t,n){return t?n?(t+=~t.indexOf("?")?"&":"?",t+=n):t:""},d=function(t){for(var n,r=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart"],e={},o=0;o<r.length;o++)n=r[o],t[n]&&(e[n]=t[n]);return e},p=function(t,n){for(prop in t)t.hasOwnProperty(prop)&&(t[prop]-=n);return t};return n.init=function(t){r=i(r,t)},n.report=function(t){var n=t.pageStart;delete t.pageStart,t=p(t,n);var e={};r.includeTiming&&(e=window.performance.timing||{}),e=d(e);var o=e.navigationStart;delete e.navigationStart,e=p(e,o),e=i(e,t),e._=+new Date;var a=u(e,"&"),f=c(r.url,a);return(new Image).src=f,f},n}(window);r.exports=e});